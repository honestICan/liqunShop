$(function(){var e=document.getElementById("uname"),n=document.getElementById("pwd"),t=document.getElementById("pwd2"),r=document.getElementById("tel"),a=document.getElementById("yanz"),o=document.getElementById("sub"),u=document.getElementsByTagName("span")[0];u.innerHTML=parseInt(9e3*Math.random()+1e3);var l=document.getElementsByTagName("p")[0],d=!1;e.onkeyup=e.onblur=function(){var n=/^[_a-zA-Z]\w{3,11}$/,t=e.value;n.test(t)?(d=!0,l.innerHTML="用户名正确",l.style.background="orange"):(l.innerHTML="用户名错误(首位不能是数字)",l.style.background="red",d=!1)};var s=!1;n.onkeyup=n.onblur=function(){var e=/^.{8,20}$/,t=n.value;e.test(t)?(s=!0,l.innerHTML="密码可用",l.style.background="orange"):(l.innerHTML="密码等级太低",l.style.background="red",s=!1)};var c=!1;t.onkeyup=t.onblur=function(){t.value==n.value?(c=!0,l.innerHTML="密码一致",l.style.background="orange"):(l.innerHTML="两次密码不一致",l.style.background="red",c=!1)};var i=!1;r.onkeyup=r.onblur=function(){var e=/^1\d{10}$/,n=r.value;e.test(n)?(i=!0,l.innerHTML="手机号格式正确",l.style.background="orange"):(l.innerHTML="手机号必须是以1开头的11位数",l.style.background="red",i=!1)};var g=!1;a.onblur=a.onkeyup=function(){a.value==u.innerHTML?(g=!0,l.innerHTML="验证码正确",l.style.background="orange"):(l.innerHTML="验证码不对",l.style.background="red",g=!1)},u.onclick=function(){u.innerHTML=parseInt(9e3*Math.random()+1e3),a.value==u.innerHTML?(g=!0,l.innerHTML="验证码正确",l.style.background="orange"):(l.innerHTML="验证码不对",l.style.background="red",g=!1)},o.onclick=function(e){if((e=e||event).preventDefault(),d&&s&&c&&i&&g){var n=new XMLHttpRequest;n.open("post","http://localhost/wq-liqun/register.php",!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send("username="+$("#uname").val()+"&password="+$("#pwd").val()+"&tel="+$("#tel").val()),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=JSON.parse(n.responseText);0==e.status?alert(e.msg):1==e.status?(alert(e.msg),location.href="login.html"):2==e.status&&alert(e.msg)}}}else 0==d?(l.innerHTML="用户名输入有误",l.style.background="red"):0==s||0==c?(l.innerHTML="密码输入有误",l.style.background="red"):0==i?(l.innerHTML="手机号格式不对",l.style.background="red"):0==g&&(l.innerHTML="验证码有误",l.style.background="red")}});